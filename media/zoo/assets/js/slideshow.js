/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(w){function v(t){return(t=t||{}).transition&&(t.transition=t.transition),t.transform&&(t.transform=t.transform),t["transform-origin"]&&(t["transform-origin"]=t["transform-origin"]),t}function n(){}var t,i,b=!1,g=(t=!(!(i=document.createElement("canvas")).getContext||!i.getContext("2d")),i=null,t);n.prototype=w.extend(n.prototype,{name:"slideshow",options:{index:0,width:"auto",height:"auto",autoplay:!0,interval:5e3,navbar_items:4,caption_animation_duration:500,kenburns_animation_duration:null,slices:20,duration:500,animated:"random",easing:"swing"},nav:null,navbar:null,captions:null,caption:null,kbi:0,initialize:function(a,t){var e,i=this;this.options=w.extend({},this.options,t),this.element=this.wrapper=a,this.ul=this.wrapper.find("ul.slides:first").css({width:"100%",overflow:"hidden"}),this.wrapper.css({position:"relative"}),this.slides=this.ul.css({position:"relative"}).children().css({top:"0px",left:"0px",position:"absolute"}).hide(),this.index=this.slides[this.options.index]?this.options.index:0,w(".next",this.wrapper).bind("click",function(t){i.stop(),i.nextSlide()}),w(".prev",this.wrapper).bind("click",function(t){i.stop(),i.prevSlide()}),this.wrapper.find(".nav:first").length&&(this.nav=this.wrapper.find(".nav:first"),(e=this.nav.children()).each(function(t){w(this).bind("click",function(){i.stop(),i.slides[t]&&i.show(t)})}),a.bind("slideshow-show",function(t,i,s){w(e.removeClass("active").get(s)).addClass("active")})),this.wrapper.find(".captions:first").length&&this.wrapper.find(".caption:first").length&&(this.captions=this.wrapper.find(".captions:first").hide().children(),this.caption=this.wrapper.find(".caption:first").hide()),this.nav&&w(this.nav.children().get(this.index)).addClass("active"),this.navbar&&w(this.navbar.children().get(this.index)).addClass("active"),this.showCaption(this.index),this.timer=null,this.hover=!1,this.wrapper.hover(function(){i.hover=!0},function(){i.hover=!1}),"ontouchend"in document&&(a.bind("touchstart",function(t){var s,i=t.originalEvent.touches?t.originalEvent.touches[0]:t,e={time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:w(t.target)};function n(t){var i;e&&(i=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[i.pageX,i.pageY]},10<Math.abs(e.coords[0]-s.coords[0])&&t.preventDefault())}a.bind("touchmove",n).one("touchend",function(t){a.unbind("touchmove",n),e&&s&&s.time-e.time<1e3&&30<Math.abs(e.coords[0]-s.coords[0])&&Math.abs(e.coords[1]-s.coords[1])<75&&e.origin.trigger("swipe").trigger(e.coords[0]>s.coords[0]?"swipeleft":"swiperight"),e=s=void 0})}),this.wrapper.bind("swipeleft",function(){i.stop(),i.nextSlide()}).bind("swiperight",function(){i.stop(),i.prevSlide()})),w(window).bind("debouncedresize",function(){i.resize()}),i.resize(),i.slides.eq(i.index).css("z-index",2).show(),"kenburns"==i.options.animated&&g&&i.show(this.index,!0),i.options.autoplay&&i.start()},resize:function(){this.fx&&(this.slicer&&this.slicer.remove(),this.slides.filter(":animated").stop(!0,!0),this.next.css({top:0,left:0,"z-index":2}).show(),"kenburns"==this.options.animated&&g&&(this.element.find("img:animated").stop().css({width:"",height:"",top:"",left:""}).fadeIn("fast"),this.element.find("canvas.tmp").remove()),this.current.css({top:0,left:0,"z-index":1}).hide()),this.fx=!1;var t=this.options.width,i=this.options.height;this.slides.css("width",""),this.slides.css("height",""),this.ul.css("height",""),this.wrapper.css("width",""),"auto"!=t&&this.wrapper.width()<t&&(i=t="auto"),this.wrapper.css({width:"auto"==t?this.wrapper.width():t});var s=this.ul.width(),e=i;"auto"==e&&(e=0,this.slides.css("width",s).show().each(function(){e=Math.max(e,w(this).height())}).hide().eq(this.index).show()),this.slides.css({height:e,width:this.ul.width()}),this.ul.css("height",e),"kenburns"==this.options.animated&&g&&this.show(this.index,!0)},nextSlide:function(){this.show(this.slides[this.index+1]?this.index+1:0)},prevSlide:function(){this.show(-1<this.index-1?this.index-1:this.slides.length-1)},show:function(t,i){this.index==t&&!i||this.fx&&"kenburns"!=this.options.animated||(this.current=w(this.slides.get(this.index)),this.next=w(this.slides.get(t)),this.animated=this.options.animated,this.duration=this.options.duration,this.easing=this.options.easing,this.dir=t>this.index?"right":"left",this.init=i,this.showCaption(t),this.element.trigger("slideshow-show",[this.index,t]),this.index=t,this[this.animated]?(this.fx=!0,this[this.animated]()):(this.current.hide(),this.next.show()))},showCaption:function(t){var i,s;this.caption&&this.captions[t]&&(i=w(this.captions.get(t)).html(),this.caption.is(":animated")&&this.caption.stop(),w.trim(i).length?(w.fn.lightbox&&i.match(/data\-lightbox/)&&(i=w("<div>"+i+"</div>")).find("a[data-lightbox]").lightbox(),this.caption.is(":visible")?(s=this).caption.fadeOut(this.options.caption_animation_duration,function(){w(this).html(i).delay(200).css("opacity","").fadeIn(s.options.caption_animation_duration)}):this.caption.html(i).fadeIn(this.options.caption_animation_duration)):this.caption.is(":visible")&&this.caption.fadeOut(this.options.caption_animation_duration))},start:function(){var t;this.timer||((t=this).timer=setInterval(function(){"kenburns"!=t.options.animated&&(t.hover||t.fx)||t.nextSlide()},this.options.interval))},stop:function(){var t;this.timer&&(clearInterval(this.timer),this.tmptimer&&clearTimeout(this.tmptimer),(t=this).tmptimer=setTimeout(function(){t.start(),this.tmptimer=!1},3e4),this.timer=!1)},bindTransitionEnd:function(t){var i=this;w(t).bind("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){i.fx=null,i.next.css({"z-index":"2",left:0,top:0}).show(),i.current.hide(),i.slicer&&i.slicer.remove()})},randomSimple:function(){var t=["top","bottom","fade","slide","scroll","swipe"];this.animated=t[Math.floor(Math.random()*t.length)],this[this.animated]()},randomFx:function(){var t=["sliceUp","sliceDown","sliceUpDown","fold","puzzle","boxes","boxesReverse"];this.animated=t[Math.floor(Math.random()*t.length)],this[this.animated]()},top:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:0,top:this.wrapper.height()*("bottom"==this.animated?2:-1)}).animate({top:0},{duration:t.duration,easing:t.easing,complete:function(){t.fx=null,t.current.hide()}})},bottom:function(){this.top.apply(this)},left:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.animated?2:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()}})},right:function(){this.left()},slide:function(){var t=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.dir?2:-1)}).animate({left:0},{duration:t.duration,easing:this.easing,complete:function(){t.fx=null,t.current.hide()}})},fade:function(){var t=this;this.next.css({top:0,left:0,"z-index":1}).fadeIn(t.duration),this.current.css({"z-index":2}).fadeOut(this.duration,function(){t.fx=null,t.current.hide().css({opacity:1})})},scrollLeft:function(){var s=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("scrollRight"==this.animated?1:-1)}).animate({left:0},{duration:s.duration,easing:this.easing,complete:function(){s.fx=null,s.current.hide()},step:function(t,i){s.current.css("left",(Math.abs(i.start)-Math.abs(t))*("scrollRight"==s.animated?-1:1))}})},scrollRight:function(){this.scrollLeft(this)},scroll:function(){var s=this;this.current.css({"z-index":1}),this.next.css({"z-index":2,display:"block",left:this.current.width()*("right"==this.dir?1:-1)}).animate({left:0},{duration:s.duration,easing:this.easing,complete:function(){s.fx=null,s.current.hide()},step:function(t,i){s.current.css("left",(Math.abs(i.start)-Math.abs(t))*("right"==s.dir?-1:1))}})},swipe:function(){var t=this;this.current.css({"z-index":2}),this.next.css({"z-index":1,top:0,left:this.next.width()/3*("right"==t.dir?1:-1)}).show();var i=w("<div></div>").css({position:"absolute",top:0,left:0,width:this.current.outerWidth(),height:this.current.outerHeight(),opacity:0,"background-color":"#000"}).appendTo(this.current),s=w("<div></div>").css({position:"absolute",top:0,left:0,width:this.current.outerWidth(),height:this.current.outerHeight(),opacity:.6,"background-color":"#000"}).appendTo(this.next);i.animate({opacity:.6},{duration:t.duration}),s.animate({opacity:0},{duration:t.duration}),this.current.animate({left:("right"==t.dir?-1:1)*this.current.width()},{duration:t.duration,easing:"easeOutCubic",complete:function(){t.fx=null,t.current.hide(),i.remove(),s.remove()}}),this.next.animate({left:0},{duration:t.duration,easing:"easeOutCubic"})},slice:function(){var s=this,t=this.next.find("img:first"),i="sliceUp"==this.animated?"bottom":"top";if(!t.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var e=this.current.find("img:first").position(),n=s.next.width(),a=s.next.height();y(this,e.top,e.left);for(var r=Math.round(this.slicer.width()/this.options.slices),o=0;o<this.options.slices;o++){var h=o==this.options.slices-1?this.slicer.width()-r*o:r;"sliceUpDown"==this.animated&&(i=(o%2+2)%2==0?"top":"bottom");var c=w("<div />").css(i,0).css(v({position:"absolute",left:r*o+"px",width:h+"px",height:0,background:"url("+t.attr("src")+") no-repeat -"+(r+o*r-r)+"px "+i,"background-size":n+"px "+a+"px",opacity:0,transition:"all "+s.duration+"ms ease-in "+60*o+"ms"}));this.slicer.append(c)}this.slices=this.slicer.children(),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show();var d,l=this.wrapper.height();b?this.slices.css(v({height:l,opacity:1})):(d=0,this.slices.each(function(t){var i=w(this);setTimeout(function(){i.animate({height:l,opacity:1},s.duration,function(){t==s.slices.length-1&&w(this).trigger("transitionend")})},d),d+=60}))},sliceUp:function(){this.slice.apply(this)},sliceDown:function(){this.slice.apply(this)},sliceUpDown:function(){this.slice.apply(this)},fold:function(){var e=this,t=this.next.find("img:first");if(!t.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var i=this.current.find("img:first").position(),s=e.next.width(),n=e.next.height();y(this,i.top,i.left);for(var a,r=Math.round(this.slicer.width()/this.options.slices)+2,o=this.current.height(),h=0;h<this.options.slices+1;h++){var c=h==e.options.slices?e.slicer.width()-r*h:r,d=w("<div />").css(v({position:"absolute",left:r*h+"px",width:c,top:"0px",height:o,background:"url("+t.attr("src")+") no-repeat -"+(r+h*r-r)+"px 0%","background-size":s+"px "+n+"px",opacity:0,transform:"scalex(0.0001)",transition:"all "+e.duration+"ms ease-in "+(100+60*h)+"ms"}));this.slicer.append(d)}this.slices=this.slicer.children(),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show(),b?this.slices.css(v({opacity:1,transform:"scalex(1)"})):(a=0,this.slices.width(0).each(function(t){var i=t==e.options.slices-1?e.slicer.width()-r*t:r,s=w(this);setTimeout(function(){s.animate({opacity:1,width:i},e.duration,function(){t==e.slices.length-1&&w(this).trigger("transitionend")})},a+100),a+=50}))},puzzle:function(){var s=this,t=Math.round(this.options.slices/2),i=Math.round(this.wrapper.width()/t),e=Math.round(this.wrapper.height()/i),n=Math.round(this.wrapper.height()/e)+1,a=this.next.find("img:first");if(!a.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var r=this.current.find("img:first").position(),o=s.next.width(),h=s.next.height();y(this,r.top,r.left);for(var c=this.wrapper.width(),d=0;d<e;d++)for(var l=0;l<t;l++){var p=w("<div />").css(v({position:"absolute",left:i*l+"px",width:l==t-1?c-i*l+"px":i+"px",top:n*d+"px",height:n+"px",background:"url("+a.attr("src")+") no-repeat -"+(i+l*i-i)+"px -"+(n+d*n-n)+"px","background-size":o+"px "+h+"px",opacity:0,"-webkit-transform":"translateZ(0)","-moz-transform":"rotate(0)",transition:"all "+s.duration+"ms ease-in 0ms"}));this.slicer.append(p)}this.slices=u(this.slicer.children()),this.bindTransitionEnd.apply(this,[this.slices.get(this.slices.length-1)]),this.current.css({"z-index":1}),this.slicer.show(),this.slices.each(function(t){var i=w(this);setTimeout(function(){b?i.css(v({opacity:1})):i.animate({opacity:1},s.duration,function(){t==s.slices.length-1&&w(this).trigger("transitionend")})},100+50*t)})},boxes:function(){var s=this,t=Math.round(this.options.slices/2),i=Math.round(this.wrapper.width()/t),e=Math.round(this.wrapper.height()/i),n=Math.round(this.wrapper.height()/e)+1,a=0,r=this.next.find("img:first");if(!r.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);var o=this.current.find("img:first").position(),h=s.next.width(),c=s.next.height();y(this,o.top,o.left);for(var d=0;d<e;d++)for(var l=0;l<t;l++)this.slicer.append(w("<div />").css(v({position:"absolute",left:i*l+"px",width:0,top:n*d+"px",height:0,background:"url("+r.attr("src")+") no-repeat -"+(i+l*i-i)+"px -"+(n+d*n-n)+"px","background-size":h+"px "+c+"px",opacity:0,transition:"all "+(100+s.duration)+"ms ease-in 0ms"})).data("base",{width:l==t-1?this.wrapper.width()-i*l:i,height:n}));this.slices=this.slicer.children(),this.current.css({"z-index":1}),this.slicer.show();var p=0,u=0,f=[];f[p]=[];var g="boxesReverse"==this.animated?this.slices._reverse():this.slices;this.bindTransitionEnd.apply(this,[g.get(g.length-1)]),g.each(function(){f[p][u]=w(this),++u==t&&(u=0,f[++p]=[])});for(var m=0,l=0;l<t*e;l++){for(var x=l,d=0;d<e;d++)0<=x&&x<t&&(function(t){var i=f[d][x];setTimeout(function(){b?i.css({opacity:"1",width:i.data("base").width,height:i.data("base").height}):i.animate({opacity:"1",width:i.data("base").width,height:i.data("base").height},s.duration,function(){t==s.slices.length-1&&w(this).trigger("transitionend")})},100+a)}(m,g.length),m++),x--;a+=100}},boxesReverse:function(){this.boxes.apply(this)},kenburns:function(){var e,t,i,s,n,a,r,o,h,c,d,l,p=this,u=this.next.find("img:first"),f=p.options.kenburns_animation_duration||2*p.options.interval;if(!u.length)return this.next.css({"z-index":"2",left:0,top:0}).show(),this.current.hide(),void(this.fx=null);g?(u.stop(!1,!0).css({width:"",height:"","max-width":"none"}),this.slides.not(this.current).not(this.next).hide(),this.current.css({"z-index":1}),this.next.css({"z-index":2,visibility:"hidden",opacity:1}).show(),this.next.find("canvas.tmp").remove(),u.position(),r=u.attr("width"),e=u.attr("height"),i=(t=[{start:["c-l",1],stop:["c-r",1.2]},{start:["t-r",1],stop:["b-l",1.2]},{start:["b-l",1],stop:["t-r",1.2]},{start:["t-c",1],stop:["b-c",1.2]},{start:["c-c",1],stop:["c-c",1.2]},{start:["b-r",1],stop:["t-l",1.2]},{start:["c-l",1],stop:["c-r",1.2]}])[this.kbi?this.kbi:0],s=w('<canvas class="tmp"></canvas>'),n=function(t,i){var s={top:0,left:0,width:r*(i=i||1),height:e*i};switch(t){case"t-l":s.top=s.left=0;break;case"t-c":s.top=0,s.left=(s.width-r)/2*-1;break;case"t-r":s.top=0,s.left=-1*(s.width-r);break;case"c-l":s.top=(s.height-e)/2*-1,s.left=0;break;case"c-c":s.top=(s.height-e)/2*-1,s.left=(s.width-r)/2*-1;break;case"c-r":s.top=(s.height-e)/2*-1,s.left=-1*(s.width-r);break;case"b-l":s.top=-1*(s.height-e),s.left=0;break;case"b-c":s.top=-1*(s.height-e),s.left=(s.width-r)/2*-1;break;case"b-r":s.top=-1*(s.height-e),s.left=-1*(s.width-r)}return s},r>this.ul.width()&&(a=r/this.ul.width(),r=this.ul.width(),e/=a,this.ul.height(e).css("overflow","hidden").css("z-index","4")),s.attr({width:r,height:e}).css({width:r,height:e,opacity:0}),u.css({width:"",height:"",top:"",left:""}).after(s).hide(),o=s.get(0).getContext("2d"),this.next.css({visibility:"visible"}),s.animate({opacity:1},p.duration),l=d=c=h=!1,u.css(n.apply(this,i.start)).animate(n.apply(this,i.stop),{step:function(t,i){!1!==h&&!1!==c&&!1!==d&&!1!==l&&(o.drawImage(u.get(0),h,c,d,l),l=d=c=h=!1),"width"==i.prop&&(d=t),"height"==i.prop&&(l=t),"left"==i.prop&&(h=t),"top"==i.prop&&(c=t)},complete:function(){w(this).css({width:"",height:"",top:"",left:""}),p.fx=null},easing:"swing",duration:f}),p.kbi=t[p.kbi+1]?p.kbi+1:0):this.fade(this)},scale:function(){var t=this;b?(this.fx=null,this.ul.css({"-webkit-transform":"translateZ(0)"}),this.slides.css(v({transition:"none",transform:"none",opacity:1})),this.slides.not(this.current).hide(),this.current.one("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){t.next.css({"z-index":"2",left:0,top:0,opacity:1}).show(),w(this).hide().css(v({transition:"none",transform:"none",opacity:1}))}).css(v({"z-index":2,opacity:1,transform:"scale(1)",transition:"all "+t.duration+"ms ease-in-out 0ms"})),this.next.css(v({"z-index":1,opacity:1,transform:"none"})).show(),t.current.css({"z-index":2}).css(v({opacity:0,transform:"scale(1.5)"}))):this.fade(this)},rotate:function(){var t,i,s,e;b?(this.fx=null,i=(t=this).current,s=[["rotate(90deg) translate(200%, -10%) scale(0.2)","rotate(-90deg) translate(-200%, -10%) scale(0.2)"],["rotate(-90deg) translate(-200%, -10%) scale(0.2)","rotate(90deg) translate(200%, -10%) scale(0.2)"],["rotate(-90deg) translate(200%, -90%) scale(0.2)","rotate(90deg) translate(-200%, -90%) scale(0.2)"],["rotate(90deg) translate(-200%, -90%) scale(0.2)","rotate(-90deg) translate(200%, -90%) scale(0.2)"],["rotate(90deg) translate(200%, -10%) scale(0.2)","rotate(90deg) translate(-200%, -90%) scale(0.2)"],["rotate(-90deg) translate(-200%, -10%) scale(0.2)","rotate(-90deg) translate(200%, -90%) scale(0.2)"],["rotate(90deg) translate(-200%, -90%) scale(0.2)","rotate(90deg) translate(200%, -10%) scale(0.2)"],["rotate(-90deg) translate(200%, -90%) scale(0.2)","rotate(-90deg) translate(-200%, -10%) scale(0.2)"],["rotate(10deg) translate(200%, 20%) scale(0.2)","rotate(10deg) translate(-200%, -20%) scale(0.2)"],["rotate(10deg) translate(-200%, -20%) scale(0.2)","rotate(10deg) translate(200%, 20%) scale(0.2)"],["rotate(-10deg) translate(200%, -20%) scale(0.2)","rotate(-10deg) translate(-200%, 20%) scale(0.2)"],["rotate(-10deg) translate(-200%, 20%) scale(0.2)","rotate(-10deg) translate(200%, -20%) scale(0.2)"],["translate(50%, 200%) scale(0.2)","translate(-50%, -200%) scale(0.2)"],["translate(-50%, -200%) scale(0.2)","translate(50%, 200%) scale(0.2)"],["translate(50%, -200%) scale(0.2)","translate(-50%, 200%) scale(0.2)"],["translate(-50%, 200%) scale(0.2)","translate(50%, -200%) scale(0.2)"]],e=parseInt(Math.random()*s.length),this.slides.not(this.current).hide(),this.current.css({"z-index":1}).css(v({opacity:1,transform:"rotate(0deg) translate(0, 0) scale(1)",transition:"all "+this.duration+"ms ease-in-out 0ms"})),this.next.css(v({"z-index":"2",left:0,top:0,opacity:0,transform:s[e][0],transition:"all "+this.duration+"ms ease-in-out 0ms"})).show(),this.next.one("webkitTransitionEnd transitionend oTransitionEnd msTransitionEnd",function(){t.slides.filter(":visible").css(v({transition:"",transform:""})),i.css(v({transition:"",transform:""})).hide()}),setTimeout(function(){t.next.css(v({opacity:1,transform:"rotate(0deg) translate(0, 0) scale(1)"})),t.current.css(v({opacity:0,transform:s[e][1]}))},10)):this.fade(this)}}),w.fn._reverse=[].reverse;function v(t){return $widgetkit.css3(t)}var u=function(t){for(var i,s,e=t.length;e;i=parseInt(Math.random()*e),s=t[--e],t[e]=t[i],t[i]=s);return t},y=function(t,i,s){i=i||0,s=s||0;t.slicer=w("<li />").addClass("slices").css({top:i,left:s,position:"absolute",width:t.wrapper.width(),height:t.ul.height(),"z-index":3}).hide().appendTo(t.ul)};w.fn[n.prototype.name]=function(){var s=arguments,e=s[0]?s[0]:null;return this.each(function(){var t,i=w(this);n.prototype[e]&&i.data(n.prototype.name)&&"initialize"!=e?i.data(n.prototype.name)[e].apply(i.data(n.prototype.name),Array.prototype.slice.call(s,1)):!e||w.isPlainObject(e)?(t=new n,n.prototype.initialize&&t.initialize.apply(t,w.merge([i],s)),i.data(n.prototype.name,t)):w.error("Method "+e+" does not exist on jQuery."+n.name)})}}(jQuery);