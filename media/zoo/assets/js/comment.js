/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(a){function o(){}a.extend(o.prototype,{name:"Comment",options:{cookiePrefix:"zoo-comment_",cookieLifetime:15552e3,msgCancel:"Cancel"},initialize:function(t,e){this.options=a.extend({},this.options,e);var n=this,i=t.find("#respond"),o=t.find("#edit");i.find("a.facebook-connect").bind("click",function(){n.setLoginCookie("facebook")}),i.find("a.facebook-logout").bind("click",function(){n.setLoginCookie("")}),i.find("a.twitter-connect").bind("click",function(){n.setLoginCookie("twitter")}),i.find("a.twitter-logout").bind("click",function(){n.setLoginCookie("")}),i.find("input:text").placeholder(),o.find(".comment-cancelEdit").bind("click",function(t){t.preventDefault(),o.hide(),o.appendTo(a("#comments")),o.find("input[name=comment_id]").val(0),o.find("textarea[name=content]").val("")}),t.find(".comment").each(function(){var e=a(this);e.find(".reply").bind("click",function(t){t.preventDefault(),o.hide(),i.find(".comment-cancelReply").remove(),a("<a>"+n.options.msgCancel+"</a>").addClass("comment-cancelReply").attr("href","#respond").bind("click",function(t){t.preventDefault(),i.find(".comment-cancelReply").remove(),i.appendTo(a("#comments")),i.find("input[name=parent_id]").val(0)}).appendTo(i.find(".actions")),i.appendTo(e),i.find("input[name=parent_id]").val(a(this).closest(".comment").attr("id").replace(/comment-/i,""))}),e.find(".edit").bind("click",function(t){t.preventDefault(),i.find(".comment-cancelReply").remove(),i.appendTo(a("#comments")),i.find("input[name=parent_id]").val(0),o.appendTo(e),o.find("input[name=comment_id]").val(a(this).closest(".comment").attr("id").replace(/comment-/i,"")),o.find("textarea[name=content]").val(a(this).closest(".comment").find(".content").html()),o.show()})})},setLoginCookie:function(t){a.cookie(this.options.cookiePrefix+"login",t,{expires:this.options.cookieLifetime/86400,path:"/"})}}),a.fn[o.prototype.name]=function(){var n=arguments,i=n[0]?n[0]:null;return this.each(function(){var t,e=a(this);o.prototype[i]&&e.data(o.prototype.name)&&"initialize"!=i?e.data(o.prototype.name)[i].apply(e.data(o.prototype.name),Array.prototype.slice.call(n,1)):!i||a.isPlainObject(i)?(t=new o,o.prototype.initialize&&t.initialize.apply(t,a.merge([e],n)),e.data(o.prototype.name,t)):a.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery),function(a){function o(){}a.extend(o.prototype,{name:"BrowseComments",options:{url:"index.php?option=com_zoo&controller=comment",id:"edit-comment-editor"},initialize:function(t,e){this.options=a.extend({},this.options,e);var n=this;(this.form=t).delegate("tr.comment-row .actions-links .edit, tr.comment-row .actions-links .reply","click",function(t){t.preventDefault();var e=a(this).attr("class");n.modifyEvent(a(this).closest("tr.comment-row"),e)}),t.delegate("tr.comment-row .actions-links span","click",function(t){switch(t.preventDefault(),a(this).attr("class")){case"no-spam":var e="approve";break;case"delete":e="remove";break;default:e=a(this).attr("class")}n.stateEvent(a(this).closest("tr.comment-row"),e)})},modifyEvent:function(n,i){var o=this;a.ajax({url:this.options.url,data:{task:i,format:"raw",cid:n.find('input[name^="cid["]').val()},success:function(t){o.removeEditor(),o.insertEditor(n,t),"edit"==i&&n.hide(),o.form.unbind("save").unbind("cancel").bind("save",function(t,e){o.removeEditor(),"edit"==i?n.replaceWith(e):a(e).insertAfter(n),o.stripe()}).bind("cancel",function(){o.removeEditor()})}})},stateEvent:function(t,e){a('<input type="hidden" name="cid">').val(t.find('input[name^="cid["]').val()).appendTo(this.form),this.form.find("input[name=task]").val(e),this.form.submit()},insertEditor:function(t,e){var i=this,n=t.after(e).next();n.find(".actions .save").bind("click",function(t){t.preventDefault();var n={};a.each(i.form.serializeArray(),function(t,e){n[e.name]=e.value}),a.ajax({type:"POST",url:i.options.url,data:a.extend(n,{task:"save",format:"raw"}),success:function(t){i.form.triggerHandler("save",t)}})}),n.find(".actions .cancel").bind("click",function(t){t.preventDefault(),i.form.triggerHandler("cancel")}),n.find(".content textarea").focus()},removeEditor:function(){a("#"+this.options.id,this.form).prev("tr").show(),a("#"+this.options.id,this.form).remove()},stripe:function(){a("table.stripe tbody tr").removeClass("odd even").each(function(){a(this).addClass(a(this).is("tr:odd")?"odd":"even")})}}),a.fn[o.prototype.name]=function(){var n=arguments,i=n[0]?n[0]:null;return this.each(function(){var t,e=a(this);o.prototype[i]&&e.data(o.prototype.name)&&"initialize"!=i?e.data(o.prototype.name)[i].apply(e.data(o.prototype.name),Array.prototype.slice.call(n,1)):!i||a.isPlainObject(i)?(t=new o,o.prototype.initialize&&t.initialize.apply(t,a.merge([e],n)),e.data(o.prototype.name,t)):a.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery);