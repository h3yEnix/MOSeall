/* Copyright (C) YOOtheme GmbH, https://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function(a){var r=location.href.match(/^(.+)administrator\/index\.php.*/i)[1];a("input.image-select").each(function(e){var t=a(this),i="image-select-"+e,e=a(".image-preview",this.parentNode);t.attr("id",i),t.val()&&a("<img>").attr("src",r+t.val()).appendTo(e)}),a(document).on("click",".image-cancel",function(){a("input",this.parentNode).val(""),a(".image-preview",this.parentNode).empty()}),a(document).on("click",".image-select",function(e){e.preventDefault();e=a("input",this.parentNode);e.attr("id")||e.attr("id","image-select-"+Math.round(1e5*Math.random())),SqueezeBox.fromElement(this,{handler:"iframe",url:"index.php?option=com_media&view=images&tmpl=component&e_name="+e.attr("id"),size:{x:800,y:500}})}),a.isFunction(window.jInsertEditorText)&&(window.insertTextOld=window.jInsertEditorText),window.jInsertEditorText=function(e,t){var i,n;t.match(/^image-select-/)?(i=a("#"+t),n=e.match(/src="([^\"]*)"/)[1],i.parent().find("div.image-preview").html(e).find("img").attr("src",r+n),i.val(n)):a.isFunction(window.insertTextOld)&&window.insertTextOld(e,t)}});